<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VOICEVOX WebUI Proxy</title>
    <style>
      body { font-family: Arial, sans-serif; margin: 2rem; max-width: 960px; }
      textarea { width: 100%; min-height: 220px; font-size: 1rem; }
      .controls { display: grid; grid-template-columns: repeat(2, minmax(200px, 1fr)); gap: 1rem; margin: 1rem 0; }
      button { padding: 0.6rem 1rem; font-size: 1rem; }
      #status { margin-top: 1rem; white-space: pre-wrap; }
      audio { width: 100%; margin-top: 1rem; }
      label { display: block; font-weight: bold; margin-bottom: 0.3rem; }
      input, select { width: 100%; padding: 0.45rem; }
      .history { margin-top: 2rem; }
      .history-item { border: 1px solid #ddd; border-radius: 8px; padding: 0.8rem; margin-bottom: 0.8rem; }
      .history-header { display: flex; justify-content: space-between; align-items: baseline; gap: 1rem; }
      .history-header strong { font-size: 1rem; }
      .history-header small { color: #666; }
      .history-text { margin: 0.5rem 0; white-space: pre-wrap; max-height: 7rem; overflow-y: auto; }
      .history-settings { margin: 0.2rem 0 0.6rem; color: #444; font-size: 0.9rem; }
      .history-actions { display: flex; gap: 0.5rem; margin-top: 0.5rem; }
    </style>
  </head>
  <body>
    <h1>VOICEVOX Synthesis WebUI</h1>
    <p>Enter plain text, Markdown, or HTML, then synthesize via the Python aiohttp proxy backend.</p>

    <label for="textInput">Input</label>
    <textarea id="textInput" placeholder="Type text, markdown, or html..."></textarea>

    <div class="controls">
      <div>
        <label for="backendEndpoint">Backend endpoint</label>
        <input id="backendEndpoint" type="url" placeholder="http://localhost:8080" />
      </div>
      <div>
        <label for="inputFormat">Input format</label>
        <select id="inputFormat">
          <option value="auto">Auto detect</option>
          <option value="text">Plain text</option>
          <option value="markdown">Markdown</option>
          <option value="html">HTML</option>
        </select>
      </div>
      <div>
        <label for="speakerSelect">Speaker</label>
        <select id="speakerSelect"></select>
      </div>
      <div>
        <label for="maxChunkChars">Max characters per chunk</label>
        <input id="maxChunkChars" type="number" min="8" value="120" />
      </div>
      <div>
        <label for="speedScale">Speed (0.5 - 2.0)</label>
        <input id="speedScale" type="number" min="0.5" max="2" step="0.1" value="1.0" />
      </div>
      <div>
        <label for="pitchScale">Pitch (-0.15 - 0.15)</label>
        <input id="pitchScale" type="number" min="-0.15" max="0.15" step="0.01" value="0.0" />
      </div>
    </div>

    <button id="synthesizeButton">Synthesize</button>
    <button id="reloadSpeakersButton">Reload Speakers</button>
    <button id="downloadButton" disabled>Download WAV</button>

    <audio id="audioPlayer" controls></audio>
    <div id="status"></div>

    <section class="history">
      <h2>History</h2>
      <p>Past synthesized audio, text, and settings are saved locally in this browser.</p>
      <button id="clearHistoryButton">Clear History</button>
      <div id="historyList"></div>
    </section>

    <script src="./app.js"></script>
  </body>
</html>
